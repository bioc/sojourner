<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sojourner: an R package for statistical analysis of single molecule trajectories • sojourner</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Sojourner: an R package for statistical analysis of single molecule trajectories">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sojourner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sojourner-vignette.html">Sojourner: an R package for statistical analysis of single molecule trajectories</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sheng-liu/sojourner">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Sojourner: an R package for statistical analysis of single molecule trajectories</h1>
                        <h4 class="author">Sheng Liu</h4>
            <address class="author_afil">
      Department of Biology, Krieger School of Arts and Sciences, Johns Hopkins University<br><h4 class="author">Sun Jay Yoo</h4>
            <address class="author_afil">
      Department of Biomedical Engineering, Johns Hopkins University<br><h4 class="author">Xiaona Tang</h4>
            <address class="author_afil">
      Department of Biology, Krieger School of Arts and Sciences, Johns Hopkins University<br><h4 class="author">Young Soo Sung</h4>
            <address class="author_afil">
      Department of Computer Science, Johns Hopkins University<br><h4 class="author">Carl Wu</h4>
            <address class="author_afil">
      Department of Molecular Biology and Genetics, School of Medicine, Johns Hopkins University<br><h4 class="date">2019-07-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sheng-liu/sojourner/blob/master/vignettes/sojourner-vignette.Rmd"><code>vignettes/sojourner-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>sojourner-vignette.Rmd</code></div>

    </address>
</address>
</address>
</address>
</address>
</div>

    
    
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  document.querySelector("h1").className = "title";
});
</script><script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  var links = document.links;  
  for (var i = 0, linksLength = links.length; i < linksLength; i++)
    if (links[i].hostname != window.location.hostname)
      links[i].target = '_blank';
});
</script><div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>A basic task in single molecule tracking is to determine diffusion coefficient from molecule trajectories identified after initial image data acquisition. The trajectory (term used interchangeably with “tracks”) of a molecule is presented as a table of <span class="math inline">\(x\)</span>,<span class="math inline">\(y\)</span> and <span class="math inline">\(z\)</span> coordinates in the unit of pixel, which then can be converted to other measurement, such as in <span class="math inline">\(\mu\)</span>m, according to the resolution of the camera. The package <em>sojourner</em> provides methods to calculate diffusion coefficient by using mean square displacement (MSD) based, displacement cumulative distribution function (CDF)-based, as well as hidden Markov model (HMM) based methods (in next release) from such input file. This vignette explains some basic usage of the package.</p>
</div>
<div id="input-data-preparation" class="section level1">
<h1 class="hasAnchor">
<a href="#input-data-preparation" class="anchor"></a>Input Data Preparation</h1>
<div id="storing-track-information" class="section level2">
<h2 class="hasAnchor">
<a href="#storing-track-information" class="anchor"></a>Storing Track Information</h2>
<p>The input file for <em>sojourner</em> is the Diatrack (.txt or .mat), ImageJ (.csv), SlimFast (.txt), or Utrack (.mat) output file. Tracks are extracted from the output files and then stored in a two-level list: (1) the first level is a list of folder names; and (2) the second level is a list of tracks.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>trackll=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">FOLDER=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">track=</span>track)) </span></code></pre></div>
<p>A naming scheme is used in the source code of the <em>sojourner</em> package as follow: <code>trackl</code> denotes a list of tracks; and <code>trackll</code>, denotes a list of folders, each containing the tracks. The coordinates of tracksare stored in a table-like data structure <code>data.frame</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># construct trackll from data.frame </span></span>
<span id="cb2-2"><a href="#cb2-2"></a>trackl=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">track_1=</span>dataframe_<span class="dv">1</span>, </span>
<span id="cb2-3"><a href="#cb2-3"></a>            <span class="dt">track_2=</span>dataframe_<span class="dv">2</span>, </span>
<span id="cb2-4"><a href="#cb2-4"></a>            <span class="dt">track_3=</span>dataframe_<span class="dv">3</span>, </span>
<span id="cb2-5"><a href="#cb2-5"></a>            ... </span>
<span id="cb2-6"><a href="#cb2-6"></a>            <span class="dt">track_n=</span>dataframe_n) </span>
<span id="cb2-7"><a href="#cb2-7"></a> </span>
<span id="cb2-8"><a href="#cb2-8"></a>trackll=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">FOLDER_1=</span>trackl_<span class="dv">1</span>, </span>
<span id="cb2-9"><a href="#cb2-9"></a>             <span class="dt">FOLDER_2=</span>trackl_<span class="dv">2</span>, </span>
<span id="cb2-10"><a href="#cb2-10"></a>             <span class="dt">FOLDER_3=</span>trackl_<span class="dv">3</span>, </span>
<span id="cb2-11"><a href="#cb2-11"></a>             ... </span>
<span id="cb2-12"><a href="#cb2-12"></a>             <span class="dt">FOLDER_n=</span>trackl_n,) </span></code></pre></div>
</div>
<div id="reading-in-track-data-with-createtrackll" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-in-track-data-with-createtrackll" class="anchor"></a>Reading in Track Data with <code><a href="../reference/createTrackll-methods.html">createTrackll()</a></code>
</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>folder=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"SWR1_2"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a>trackll =<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder=</span>folder, <span class="dt">input=</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## 
## Reading ParticleTracker file:  SWR1_WT_140mW_image6.csv ...
## 
##  mage6 read and processed.
## 
## Reading ParticleTracker file:  SWR1_WT_140mW_image7.csv ...
## 
##  mage7 read and processed.
## 
## Process complete.</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>trackll &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mergeTracks-methods.html">mergeTracks</a></span>(<span class="dt">folder=</span>folder, <span class="dt">trackll=</span>trackll)</span></code></pre></div>
<pre><code>## 
## Merging of folder SWR1_2 complete.</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(trackll,<span class="dt">max.level=</span><span class="dv">2</span>, <span class="dt">list.len=</span><span class="dv">5</span>) </span></code></pre></div>
<pre><code>## List of 1
##  $ SWR1_2:List of 346
##   ..$ mage6.1.4.1.1        :'data.frame':    4 obs. of  4 variables:
##   ..$ mage6.2.2.2.2        :'data.frame':    2 obs. of  4 variables:
##   ..$ mage6.4.9.3.3        :'data.frame':    9 obs. of  4 variables:
##   ..$ mage6.5.8.4.4        :'data.frame':    8 obs. of  4 variables:
##   ..$ mage6.11.12.5.5      :'data.frame':    12 obs. of  4 variables:
##   .. [list output truncated]</code></pre>
<p>This folder named “SWR1” has in total 346 tracks. Folder name is after the first-level “$” sign, track name is after the second-level “$” sign. To see coordinates of an individual track, you can specify the folder name and the track name.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># specify the folder name and the track name</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>trackll[[<span class="st">"SWR1_2"</span>]][<span class="st">"mage6.1.4.1.1"</span>]</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co"># alternatively, specify the index of the folder and the track</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co"># trackll[[1]][1]</span></span></code></pre></div>
<pre><code>## $mage6.1.4.1.1
##       x     y z Frame
## 1 40.32 49.36 1     1
## 2 41.03 47.33 1     2
## 3 41.05 48.43 1     3
## 4 40.90 49.09 1     4</code></pre>
<p>The naming scheme for the list of track list is as follows:</p>
<p>Track List: [full name of input file]</p>
<p>Track: [Last five characters of the file name].[Start frame].[Length].[Track].[Index in overall list (will differ from Track # when merging)]</p>
</div>
<div id="plotting-tracks" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-tracks" class="anchor"></a>Plotting Tracks</h2>
<p>The first thing one may want to do is to see how the tracks look like in 2-D space. The track name is useful in this case if one wants to see specific trajectories and its associated movies.</p>
<p>All one needs to do is to create a .csv file contains trajectory names in its first column. <em>sojourner</em> package contains such an example .csv file.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># specify the path of the file containing trajectory index names, index file</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>index.file2=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"INDEX"</span>,<span class="st">"indexFile2.csv"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co"># specify the folders containing the output files</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>folder1=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"SWR1_2"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</span>
<span id="cb11-5"><a href="#cb11-5"></a>folder2=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"HTZ1"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># plot trajectories specified in the trajectory index file</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="kw"><a href="../reference/plotTrack-methods.html">plotTrackFromIndex</a></span>(<span class="dt">index.file=</span>index.file2, <span class="dt">movie.folder=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(folder1,folder2))</span></code></pre></div>
<p>The output plots the tracks based on its name, with the information contained in its name (i.e. start frame and length/duration), one can also pull out its movie. See <code><a href="../reference/plotTrack-methods.html">? plotTrack</a></code> for more plotting options.</p>
</div>
<div id="distribution-of-trajectory-lengths-with-dwelltime" class="section level2">
<h2 class="hasAnchor">
<a href="#distribution-of-trajectory-lengths-with-dwelltime" class="anchor"></a>Distribution of Trajectory Lengths with <code><a href="../reference/dwellTime-methods.html">dwellTime()</a></code>
</h2>
<p>One maybe interested to see the distribution of the (time) length of the tracks. This can be done by:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw"><a href="../reference/dwellTime-methods.html">dwellTime</a></span>(trackll,<span class="dt">plot=</span><span class="ot">TRUE</span>) <span class="co"># default t.interval=10, x.scale=c(0,250)</span></span></code></pre></div>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-7-1.png" width="60%"></p>
</div>
<div id="filter-tracks-on-length-with-filtertrack" class="section level2">
<h2 class="hasAnchor">
<a href="#filter-tracks-on-length-with-filtertrack" class="anchor"></a>Filter Tracks on Length with <code><a href="../reference/filterTrack-methods.html">filterTrack()</a></code>
</h2>
<p>In the previous section, we can see majority of the track lengths centered at 20 ms which is 2 frames. If we intend to only analyze frames length at specific range, one can use the <code><a href="../reference/filterTrack-methods.html">filterTrack()</a></code> function.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>trackll=<span class="kw"><a href="../reference/filterTrack-methods.html">filterTrack</a></span>(trackll,<span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">min=</span><span class="dv">7</span>,<span class="dt">max=</span><span class="ot">Inf</span>))</span></code></pre></div>
<pre><code>## applying filter, min 7   max Inf</code></pre>
</div>
</div>
<div id="data-manipulation" class="section level1">
<h1 class="hasAnchor">
<a href="#data-manipulation" class="anchor"></a>Data Manipulation</h1>
<p>Below is a detailed description of functions of sojourner for importing, exporting and processing of single molecule trajectories.</p>
<div id="reading-data" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-data" class="anchor"></a>Reading Data</h2>
<div id="createtrackll" class="section level3">
<h3 class="hasAnchor">
<a href="#createtrackll" class="anchor"></a><code><a href="../reference/createTrackll-methods.html">createTrackll()</a></code>
</h3>
<div id="description" class="section level4">
<h4 class="hasAnchor">
<a href="#description" class="anchor"></a>Description</h4>
<p>Take in Diatrack (.txt or .mat), ImageJ (.csv), SlimFast (.txt), or U-Track (.mat) input from a folder to output a list of track lists (<code>trackll</code>).</p>
</div>
<div id="parameters" class="section level4">
<h4 class="hasAnchor">
<a href="#parameters" class="anchor"></a>Parameters</h4>
<table class="table">
<colgroup>
<col width="28%">
<col width="71%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>interact</code> (default <code>FALSE</code>)</td>
<td>Open interactive menu to choose the desired folder by selecting any file in it and select input type (script will process all files of that type in this folder).</td>
</tr>
<tr class="even">
<td>
<code>folder</code> (specify, unless interact = <code>TRUE</code>)</td>
<td>Full path output file folder (ensure each folder has files of only one input type).</td>
</tr>
<tr class="odd">
<td>
<code>input</code> (specify, unless <code>interact = TRUE</code>)</td>
<td>Input file type (Diatrack .txt file = <code>1</code>; Diatrack .mat session file = <code>2</code>; ImageJ .csv file = <code>3</code>; SlimFast .txt file = <code>4</code>; Utrack .mat file = <code>5</code>).</td>
</tr>
<tr class="even">
<td>
<code>ab.track</code> (default <code>FALSE</code>)</td>
<td>Use absolute coordinates for tracks.</td>
</tr>
<tr class="odd">
<td>
<code>cores</code> (default <code>1</code>)</td>
<td>Number of cores used for parallel computation. This can be the cores on a workstation, or on a cluster. Each core will be assigned to read one file when in parallel.</td>
</tr>
<tr class="even">
<td>
<code>frameRecord</code> (default <code>TRUE</code>)</td>
<td>Add a fourth column to the track list after the <span class="math inline">\(x\)</span>,<span class="math inline">\(y\)</span>,<span class="math inline">\(z\)</span>-coordinates for the frame that coordinate point was found (especially helpful when linking frames). Highly recommended to leave on.</td>
</tr>
</tbody>
</table>
</div>
<div id="notes" class="section level4">
<h4 class="hasAnchor">
<a href="#notes" class="anchor"></a>Notes</h4>
<p>(When reading only Diatrack .mat session files (input = <code>2</code>), intensities will also be saved after the frame column)</p>
<p>It is highly advised that the frame record option be left on to preserve the most information, especially when linking frames. If the frame record option is turned on for reading Diatrack .txt files (<code>input = 1</code>), take note that the frame record is artificially created as consecutive frames after the given start frame. Otherwise, all other data types naturally encode the frames of every coordinate point.</p>
<p>The pre-censoring of single-frame tracks is dependent on the tracking software. <strong>For highest fidelity track data, use Diatrack (.mat) session files.</strong> If the initial creation of the trackll does not have a frame record, future exports and imports of the trackll will only preserve the start frames.</p>
<p>If the cores are set to the maximum number of cores available on the system, the script may return a error after processing all the files. This error is due to the requirement of some systems to have one core open for system functions. This error will not affect the trackll output, but to avoid it, one can input one less than the maximum number of cores available.</p>
<p>The naming scheme for the list of track list is as follows:</p>
<p>Track List: [full name of input file]</p>
<p>Track: [Last five characters of the file name].[Start frame].[Length].[Track].[Index in overall list (will differ from Track # when merging)]</p>
<p>(The last five characters of the file name, excluding the extension, cannot contain “.”)</p>
</div>
<div id="aditional-information" class="section level4">
<h4 class="hasAnchor">
<a href="#aditional-information" class="anchor"></a>Aditional Information</h4>
<ul>
<li><p>Using <code><a href="../reference/createTrackll-methods.html">createTrackll()</a></code> is equivalent to using <code><a href="../reference/readDiatrack-methods.html">readDiatrack()</a></code>, <code><a href="../reference/readDiaSessions-methods.html">readDiaSessions()</a></code>, <code><a href="../reference/readParticleTracker-methods.html">readParticleTracker()</a></code>, and <code><a href="../reference/readSlimFast-methods.html">readSlimFast()</a></code> with their corresponding input files.</p></li>
<li><p>If the frame record in the fourth column needs to be deleted in a single track list, call <code>removeFrameRecord()</code> with the track list as the only input.</p></li>
</ul>
</div>
<div id="examples" class="section level4">
<h4 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># Designate a folder and then create trackll from DiaTrack .txt data</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>folder=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"SWR1_2"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</span>
<span id="cb15-3"><a href="#cb15-3"></a>trackll =<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder=</span>folder, <span class="dt">input=</span><span class="dv">3</span>)</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># Alternatively, use interact to open file browser and select input data type</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co"># trackll &lt;- createTrackll(interact = TRUE)</span></span></code></pre></div>
<pre><code>## 
## Reading ParticleTracker file:  SWR1_WT_140mW_image6.csv ...
## 
##  mage6 read and processed.
## 
## Reading ParticleTracker file:  SWR1_WT_140mW_image7.csv ...
## 
##  mage7 read and processed.
## 
## Process complete.</code></pre>
</div>
</div>
</div>
<div id="processing-data" class="section level2">
<h2 class="hasAnchor">
<a href="#processing-data" class="anchor"></a>Processing Data</h2>
<div id="linkskippedframes" class="section level3">
<h3 class="hasAnchor">
<a href="#linkskippedframes" class="anchor"></a><code><a href="../reference/linkSkippedFrames-methods.html">linkSkippedFrames()</a></code>
</h3>
<div id="description-1" class="section level4">
<h4 class="hasAnchor">
<a href="#description-1" class="anchor"></a>Description</h4>
<p>Link trajectories that skip (or do not appear for) a number of frames.</p>
</div>
<div id="parameters-1" class="section level4">
<h4 class="hasAnchor">
<a href="#parameters-1" class="anchor"></a>Parameters</h4>
<table class="table">
<colgroup>
<col width="16%">
<col width="83%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>trackll</code> (specify)</td>
<td>A list of track lists.</td>
</tr>
<tr class="even">
<td>
<code>tolerance</code> (specify)</td>
<td>Distance tolerance level measured in pixels after the frame skip.</td>
</tr>
<tr class="odd">
<td>
<code>maxSkip</code> (specify)</td>
<td>Maximum number of frames a trajectory can skip.</td>
</tr>
<tr class="even">
<td>
<code>cores</code> (default <code>1</code>)</td>
<td>Number of cores used for parallel computation. This can be the cores on a workstation, or on a cluster. Tip: each core will be assigned to read in a file when paralleled.</td>
</tr>
</tbody>
</table>
</div>
<div id="notes-1" class="section level4">
<h4 class="hasAnchor">
<a href="#notes-1" class="anchor"></a>Notes</h4>
<p>Given user input for a tolerance level to limit how far the next point after the skip can deviate from the last point in pixel distance and a maximum number of frame skips possible, all trajectories falling within these parameters are automatically linked, renamed, and ordered accordingly. For a <code>maxSkip</code> example, if the <code>maxSkip</code> for a trajectory ending in frame 7 was 3, the next linked trajectory can start up to a maximum frame of 11.</p>
<p>Although not required, in order for the output to have a frame record column (recommended), the input must have one as well.</p>
<p>The naming scheme for each linked track is as follows:</p>
<p>[Last five characters of the file name].[Start frame #].[Length].[Track #].[# of links]</p>
<p>Track List: [full name of input file]</p>
<p>Track: [Last five characters of the file name].[Start frame].[Length].[Track].[# of links].[Index in overall list (will differ from Track # when merging)]</p>
<p>(Note: The last five characters of the file name, excluding the extension, cannot contain “.”)</p>
</div>
<div id="examples-1" class="section level4">
<h4 class="hasAnchor">
<a href="#examples-1" class="anchor"></a>Examples</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Basic function call of linkSkippedFrames</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>trackll.linked &lt;-<span class="st"> </span><span class="kw"><a href="../reference/linkSkippedFrames-methods.html">linkSkippedFrames</a></span>(trackll, <span class="dt">tolerance =</span> <span class="dv">5</span>, <span class="dt">maxSkip =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## 
## Linking mage6 ...
## 
##  156 links found in mage6 
## 
## Linking mage7 ...
## 
##  112 links found in mage7 
## 
## Process complete.</code></pre>
<p>Visualization using <code><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay()</a></code>:</p>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-12-1.png" width="700"><img src="sojourner-vignette_files/figure-html/unnamed-chunk-12-2.png" width="700"></p>
</div>
</div>
<div id="filtertrack" class="section level3">
<h3 class="hasAnchor">
<a href="#filtertrack" class="anchor"></a><code><a href="../reference/filterTrack-methods.html">filterTrack()</a></code>
</h3>
<div id="description-2" class="section level4">
<h4 class="hasAnchor">
<a href="#description-2" class="anchor"></a>Description</h4>
<p>Filter out tracks that have lengths within a specified range.</p>
</div>
<div id="parameters-2" class="section level4">
<h4 class="hasAnchor">
<a href="#parameters-2" class="anchor"></a>Parameters</h4>
<table class="table">
<colgroup>
<col width="16%">
<col width="83%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>trackll</code> (specify)</td>
<td>A list of track lists.</td>
</tr>
<tr class="even">
<td>
<code>filter</code> (default <code><a href="https://www.rdocumentation.org/packages/base/topics/c">c(min=7,max=Inf)</a></code>)</td>
<td>Range of possible track lengths to keep.</td>
</tr>
</tbody>
</table>
</div>
<div id="examples-2" class="section level4">
<h4 class="hasAnchor">
<a href="#examples-2" class="anchor"></a>Examples</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>trackll.filter=<span class="kw"><a href="../reference/filterTrack-methods.html">filterTrack</a></span>(trackll ,<span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">7</span>,<span class="ot">Inf</span>))</span></code></pre></div>
<pre><code>## applying filter, min 7   max Inf</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># See the min and max length of the trackll</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="co"># trackLength() is a helper function output track length of trackll</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="../reference/filterTrack-methods.html">trackLength</a></span>(trackll),min)</span></code></pre></div>
<pre><code>## $SWR1_WT_140mW_image6.csv
## [1] 2
## 
## $SWR1_WT_140mW_image7.csv
## [1] 2</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="../reference/filterTrack-methods.html">trackLength</a></span>(trackll.filter),min)</span></code></pre></div>
<pre><code>## $SWR1_WT_140mW_image6.csv
## [1] 7
## 
## $SWR1_WT_140mW_image7.csv
## [1] 7</code></pre>
<p>Visualization using <code><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay()</a></code>:</p>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-14-1.png" width="700"><img src="sojourner-vignette_files/figure-html/unnamed-chunk-14-2.png" width="700"></p>
</div>
</div>
<div id="trimtrack" class="section level3">
<h3 class="hasAnchor">
<a href="#trimtrack" class="anchor"></a><code><a href="../reference/filterTrack-methods.html">trimTrack()</a></code>
</h3>
<div id="description-3" class="section level4">
<h4 class="hasAnchor">
<a href="#description-3" class="anchor"></a>Description</h4>
<p>Trim tracks to a certain specified range of lengths.</p>
</div>
<div id="parameters-3" class="section level4">
<h4 class="hasAnchor">
<a href="#parameters-3" class="anchor"></a>Parameters</h4>
<table class="table">
<colgroup>
<col width="16%">
<col width="83%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>trackll</code> (specify)</td>
<td>A list of track lists.</td>
</tr>
<tr class="even">
<td>
<code>trimmer</code> (default <code><a href="https://www.rdocumentation.org/packages/base/topics/c">c(min=1,max=32)</a></code>)</td>
<td>Range of track lengths allowed in output, otherwise trimmed.</td>
</tr>
</tbody>
</table>
</div>
<div id="examples-3" class="section level4">
<h4 class="hasAnchor">
<a href="#examples-3" class="anchor"></a>Examples</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>trackll.trim=<span class="kw"><a href="../reference/filterTrack-methods.html">trimTrack</a></span>(trackll,<span class="dt">trimmer=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>,<span class="dv">20</span>))</span></code></pre></div>
<pre><code>## applying trimmer, min 1   max 20</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># See the min and max length of the trackll</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="co"># trackLength() is a helper function output track length of trackll</span></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="../reference/filterTrack-methods.html">trackLength</a></span>(trackll),max)</span></code></pre></div>
<pre><code>## $SWR1_WT_140mW_image6.csv
## [1] 30
## 
## $SWR1_WT_140mW_image7.csv
## [1] 15</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="../reference/filterTrack-methods.html">trackLength</a></span>(trackll.trim),max)</span></code></pre></div>
<pre><code>## $SWR1_WT_140mW_image6.csv
## [1] 20
## 
## $SWR1_WT_140mW_image7.csv
## [1] 15</code></pre>
<p>Visualization using <code><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay()</a></code>:</p>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-16-1.png" width="700"><img src="sojourner-vignette_files/figure-html/unnamed-chunk-16-2.png" width="700"></p>
</div>
</div>
<div id="masktracks" class="section level3">
<h3 class="hasAnchor">
<a href="#masktracks" class="anchor"></a><code><a href="../reference/maskTracks-methods.html">maskTracks()</a></code>
</h3>
<div id="description-4" class="section level4">
<h4 class="hasAnchor">
<a href="#description-4" class="anchor"></a>Description</h4>
<p>Apply binary image masks.</p>
</div>
<div id="parameters-4" class="section level4">
<h4 class="hasAnchor">
<a href="#parameters-4" class="anchor"></a>Parameters</h4>
<table class="table">
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>folder</code> (specify)</td>
<td>Full path to the output files.</td>
</tr>
<tr class="even">
<td>
<code>trackll</code> (specify)</td>
<td>A list of track lists.</td>
</tr>
</tbody>
</table>
</div>
<div id="notes-2" class="section level4">
<h4 class="hasAnchor">
<a href="#notes-2" class="anchor"></a>Notes</h4>
<p>IMPORTANT: It will take an extremely long time to mask large datasets. Filter/trim first using <code><a href="../reference/filterTrack-methods.html">filterTrack()</a></code> and <code><a href="../reference/filterTrack-methods.html">trimTrack()</a></code>, then mask using <code><a href="../reference/maskTracks-methods.html">maskTracks()</a></code>! Note the mask file should have the same name as the output files with a "_MASK.tif" ending. If there are more mask files than <code>trackll</code>, masking will fail. If there are less mask files, <code>trackl</code>s without masks will be deleted. Users can use <code><a href="../reference/plotTrack-methods.html">plotMask()</a></code> and <code><a href="../reference/plotTrack-methods.html">plotTrackOverlay()</a></code> to see the mask and its effect on screening tracks.</p>
</div>
<div id="examples-4" class="section level4">
<h4 class="hasAnchor">
<a href="#examples-4" class="anchor"></a>Examples</h4>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># Basic masking with folder path with image masks</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>folder =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"ImageJ"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</span>
<span id="cb31-3"><a href="#cb31-3"></a>trackll =<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(folder, <span class="dt">input =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## 
## Reading ParticleTracker file:  epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv ...
## 
##  0mW_1 read and processed.
## 
## Reading ParticleTracker file:  epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv ...
## 
##  0mW_2 read and processed.
## 
## Process complete.</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>trackll.filter=<span class="kw"><a href="../reference/filterTrack-methods.html">filterTrack</a></span>(trackll ,<span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">7</span>,<span class="ot">Inf</span>))</span></code></pre></div>
<pre><code>## applying filter, min 7   max Inf</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>trackll.masked &lt;-<span class="st"> </span><span class="kw"><a href="../reference/maskTracks-methods.html">maskTracks</a></span>(<span class="dt">folder =</span> folder, <span class="dt">trackll =</span> trackll.filter)</span></code></pre></div>
<pre><code>## Reading mask file     epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1_MASK.tif 
## Reading mask file     epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2_MASK.tif 
## 
## All files masked.</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># Plot mask</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>mask.list=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(<span class="dt">path=</span>folder,<span class="dt">pattern=</span><span class="st">"_MASK.tif"</span>,<span class="dt">full.names=</span><span class="ot">TRUE</span>)</span>
<span id="cb37-3"><a href="#cb37-3"></a><span class="kw"><a href="../reference/plotTrack-methods.html">plotMask</a></span>(folder)</span></code></pre></div>
<pre><code>## 
## Reading mask file epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1_MASK.tif</code></pre>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<pre><code>## 
## Reading mask file epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2_MASK.tif</code></pre>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-17-2.png" width="700"></p>
<pre><code>## 
## Done!</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># If nuclear image is available</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="kw"><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay</a></span>(<span class="dt">folder=</span>folder,<span class="dt">trackll=</span>trackll)</span></code></pre></div>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-18-1.png" width="700"><img src="sojourner-vignette_files/figure-html/unnamed-chunk-18-2.png" width="700"></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="kw"><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay</a></span>(<span class="dt">folder=</span>folder,<span class="dt">trackll=</span>trackll.masked)</span></code></pre></div>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-18-3.png" width="700"><img src="sojourner-vignette_files/figure-html/unnamed-chunk-18-4.png" width="700"></p>
</div>
</div>
<div id="mergetracks" class="section level3">
<h3 class="hasAnchor">
<a href="#mergetracks" class="anchor"></a><code><a href="../reference/mergeTracks-methods.html">mergeTracks()</a></code>
</h3>
<div id="description-5" class="section level4">
<h4 class="hasAnchor">
<a href="#description-5" class="anchor"></a>Description</h4>
<p>Merge a list of track lists into one.</p>
</div>
<div id="parameters-5" class="section level4">
<h4 class="hasAnchor">
<a href="#parameters-5" class="anchor"></a>Parameters</h4>
<table class="table">
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>folder</code> (specify)</td>
<td>Full path to the output files.</td>
</tr>
<tr class="even">
<td>
<code>trackll</code> (specify)</td>
<td>A list of track lists.</td>
</tr>
</tbody>
</table>
</div>
<div id="notes-3" class="section level4">
<h4 class="hasAnchor">
<a href="#notes-3" class="anchor"></a>Notes</h4>
<p>IMPORTANT: Once a <code>trackll</code> has been merged, it cannot be masked using <code><a href="../reference/maskTracks-methods.html">maskTracks()</a></code>.</p>
<p>Merging creates the following data structure: (1) first level is the folder name, (2) second level is a list of <code>data.frames</code>/tracks from all output files merged into one.</p>
<p>If not merged, track lists takes the name of individual files in the folder. If merged, the single merged track list takes the folder name.</p>
</div>
<div id="examples-5" class="section level4">
<h4 class="hasAnchor">
<a href="#examples-5" class="anchor"></a>Examples</h4>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># Read data</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>folder=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"SWR1_2"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</span>
<span id="cb43-3"><a href="#cb43-3"></a>trackll =<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder=</span>folder, <span class="dt">input=</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## 
## Reading ParticleTracker file:  SWR1_WT_140mW_image6.csv ...
## 
##  mage6 read and processed.
## 
## Reading ParticleTracker file:  SWR1_WT_140mW_image7.csv ...
## 
##  mage7 read and processed.
## 
## Process complete.</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="co"># Basic masking with folder path with image masks</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>trackll.merged &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mergeTracks-methods.html">mergeTracks</a></span>(<span class="dt">folder =</span> folder, <span class="dt">trackll =</span> trackll)</span></code></pre></div>
<pre><code>## 
## Merging of folder SWR1_2 complete.</code></pre>
</div>
</div>
</div>
<div id="exporting-data" class="section level2">
<h2 class="hasAnchor">
<a href="#exporting-data" class="anchor"></a>Exporting Data</h2>
<div id="exporttrackll" class="section level3">
<h3 class="hasAnchor">
<a href="#exporttrackll" class="anchor"></a><code><a href="../reference/exportTrackll-methods.html">exportTrackll()</a></code>
</h3>
<div id="description-6" class="section level4">
<h4 class="hasAnchor">
<a href="#description-6" class="anchor"></a>Description</h4>
<p>Take in a list of track lists (<code>trackll</code>) and export it into row-wise (ImageJ/MOSAIC) .csv files in the working directory.</p>
</div>
<div id="parameters-6" class="section level4">
<h4 class="hasAnchor">
<a href="#parameters-6" class="anchor"></a>Parameters</h4>
<table class="table">
<colgroup>
<col width="16%">
<col width="83%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>trackll</code></td>
<td>A list of track lists.</td>
</tr>
<tr class="even">
<td>
<code>cores</code> (default 1)</td>
<td>Number of cores used for parallel computation. This can be the cores on a workstation, or on a cluster. Tip: each core will be assigned to read in a file when paralleled.</td>
</tr>
</tbody>
</table>
</div>
<div id="notes-4" class="section level4">
<h4 class="hasAnchor">
<a href="#notes-4" class="anchor"></a>Notes</h4>
<p>The reason why ImageJ/MOSAIC style .csv export was chosen is because it fully preserves track frame data, while maintaining short computation time and easy readability in Excel/etc.</p>
<p>In order to import this .csv export back into a trackll at any point (while preserving all information), select <code>input = 3</code> in <code><a href="../reference/createTrackll-methods.html">createTrackll()</a></code>.</p>
<p>If the track list does not have a fourth frame record column (not recommended), it will just output the start frame of each track instead and will take noticeably longer.</p>
<p>It is not recommended that exportTrackll be run on merged list of track lists (<code>trackll</code>). Also, ensure that the input trackll is a list of track lists and not just a track list.</p>
<p>The naming scheme for each export is as follows:</p>
<p>[yy-MM-dd]<em>[HH-mm-ss]</em>[Last five characters of the file name].csv</p>
</div>
<div id="examples-6" class="section level4">
<h4 class="hasAnchor">
<a href="#examples-6" class="anchor"></a>Examples</h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co">#Basic function call to exportTrackll into current directory</span></span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="kw"><a href="../reference/exportTrackll-methods.html">exportTrackll</a></span>(trackll)</span>
<span id="cb47-3"><a href="#cb47-3"></a></span>
<span id="cb47-4"><a href="#cb47-4"></a><span class="co">#Get current working directory</span></span>
<span id="cb47-5"><a href="#cb47-5"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/getwd">getwd</a></span>()</span>
<span id="cb47-6"><a href="#cb47-6"></a></span>
<span id="cb47-7"><a href="#cb47-7"></a><span class="co">#Import export save back into a trackll</span></span>
<span id="cb47-8"><a href="#cb47-8"></a>trackll<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/getwd">getwd</a></span>(), <span class="dt">input =</span> <span class="dv">3</span>)</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="calculating-diffusion-coefficient-using-msd-based-method" class="section level1">
<h1 class="hasAnchor">
<a href="#calculating-diffusion-coefficient-using-msd-based-method" class="anchor"></a>Calculating Diffusion Coefficient Using MSD-Based Method</h1>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="co"># Specify folder with data</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>folder=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"HSF"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</span>
<span id="cb48-3"><a href="#cb48-3"></a></span>
<span id="cb48-4"><a href="#cb48-4"></a><span class="co"># Create track list</span></span>
<span id="cb48-5"><a href="#cb48-5"></a>trackll&lt;-<span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder=</span>folder, <span class="dt">interact=</span><span class="ot">FALSE</span>, <span class="dt">input=</span><span class="dv">3</span>, <span class="dt">ab.track=</span><span class="ot">FALSE</span>, <span class="dt">cores=</span><span class="dv">1</span>, <span class="dt">frameRecord=</span><span class="ot">TRUE</span>)</span>
<span id="cb48-6"><a href="#cb48-6"></a></span>
<span id="cb48-7"><a href="#cb48-7"></a><span class="co"># Filter/choose tracks 3 frames or longer for all analysis </span></span>
<span id="cb48-8"><a href="#cb48-8"></a>trackll.fi&lt;-<span class="kw"><a href="../reference/filterTrack-methods.html">filterTrack</a></span>(<span class="dt">trackll=</span>trackll, <span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">min=</span><span class="dv">3</span>,<span class="dt">max=</span><span class="ot">Inf</span>))</span>
<span id="cb48-9"><a href="#cb48-9"></a></span>
<span id="cb48-10"><a href="#cb48-10"></a><span class="co"># Apply mask and remove tracks outside nuclei </span></span>
<span id="cb48-11"><a href="#cb48-11"></a>trackll.fi.ma&lt;-<span class="kw"><a href="../reference/maskTracks-methods.html">maskTracks</a></span>(folder,trackll.fi)</span>
<span id="cb48-12"><a href="#cb48-12"></a></span>
<span id="cb48-13"><a href="#cb48-13"></a><span class="co"># Overlay all tracks on nuclei</span></span>
<span id="cb48-14"><a href="#cb48-14"></a><span class="kw"><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay</a></span>(<span class="dt">folder=</span>folder,<span class="dt">trackll=</span>trackll.fi,<span class="dt">cores=</span><span class="dv">1</span>, <span class="dt">max.pixel=</span><span class="dv">128</span>,<span class="dt">nrow=</span><span class="dv">2</span>,<span class="dt">ncol=</span><span class="dv">2</span>,<span class="dt">width=</span><span class="dv">16</span>,<span class="dt">height=</span><span class="dv">16</span>)</span>
<span id="cb48-15"><a href="#cb48-15"></a></span>
<span id="cb48-16"><a href="#cb48-16"></a><span class="co"># Overlay tracks after nuclear mask</span></span>
<span id="cb48-17"><a href="#cb48-17"></a><span class="kw"><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay</a></span>(<span class="dt">folder=</span>folder,<span class="dt">trackll=</span>trackll.fi.ma,<span class="dt">cores=</span><span class="dv">1</span>, <span class="dt">max.pixel=</span><span class="dv">128</span>,<span class="dt">nrow=</span><span class="dv">2</span>,<span class="dt">ncol=</span><span class="dv">2</span>,<span class="dt">width=</span><span class="dv">16</span>,<span class="dt">height=</span><span class="dv">16</span>)</span>
<span id="cb48-18"><a href="#cb48-18"></a></span>
<span id="cb48-19"><a href="#cb48-19"></a><span class="co"># Overlay tracks color coded for diffusion coefficient</span></span>
<span id="cb48-20"><a href="#cb48-20"></a><span class="kw"><a href="../reference/plotTrackOverlay_Dcoef-methods.html">plotTrackOverlay_Dcoef</a></span>(<span class="dt">trackll=</span>trackll.fi.ma, <span class="dt">Dcoef.range=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="op">-</span><span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb48-21"><a href="#cb48-21"></a></span>
<span id="cb48-22"><a href="#cb48-22"></a><span class="co"># Merge tracks from different image files in the folder</span></span>
<span id="cb48-23"><a href="#cb48-23"></a>trackll.fi.ma.me=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="../reference/mergeTracks-methods.html">mergeTracks</a></span>(folder, trackll.fi.ma))</span>
<span id="cb48-24"><a href="#cb48-24"></a></span>
<span id="cb48-25"><a href="#cb48-25"></a><span class="co"># calculate MSD for all tracks longer than 3 frames</span></span>
<span id="cb48-26"><a href="#cb48-26"></a><span class="kw"><a href="../reference/msd-methods.html">msd</a></span>(trackll.fi.ma.me,<span class="dt">dt=</span><span class="dv">20</span>,<span class="dt">resolution=</span><span class="fl">0.107</span>,<span class="dt">summarize=</span><span class="ot">TRUE</span>,<span class="dt">cores=</span><span class="dv">1</span>,<span class="dt">plot=</span><span class="ot">TRUE</span>,<span class="dt">output=</span><span class="ot">TRUE</span>)</span>
<span id="cb48-27"><a href="#cb48-27"></a></span>
<span id="cb48-28"><a href="#cb48-28"></a>trackll.combine.trim=<span class="kw"><a href="../reference/filterTrack-methods.html">trimTrack</a></span>(trackll.fi.ma.me,<span class="dt">trimmer=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>,<span class="dv">11</span>))</span>
<span id="cb48-29"><a href="#cb48-29"></a></span>
<span id="cb48-30"><a href="#cb48-30"></a><span class="kw"><a href="../reference/Dcoef-methods.html">Dcoef</a></span>(<span class="dt">trackll=</span>trackll.combine.trim,<span class="dt">dt=</span><span class="dv">5</span>, <span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">min=</span><span class="dv">6</span>,<span class="dt">max=</span><span class="ot">Inf</span>), <span class="dt">method=</span><span class="st">"static"</span>, <span class="dt">plot=</span><span class="ot">TRUE</span>, <span class="dt">output=</span><span class="ot">TRUE</span>)</span>
<span id="cb48-31"><a href="#cb48-31"></a></span>
<span id="cb48-32"><a href="#cb48-32"></a><span class="kw"><a href="../reference/msd-methods.html">msd</a></span>(trackll.combine.trim,<span class="dt">dt=</span><span class="dv">10</span>,<span class="dt">resolution=</span><span class="fl">0.107</span>,<span class="dt">summarize=</span><span class="ot">TRUE</span>,<span class="dt">cores=</span><span class="dv">1</span>,<span class="dt">plot=</span><span class="ot">TRUE</span>,<span class="dt">output=</span><span class="ot">TRUE</span>)</span>
<span id="cb48-33"><a href="#cb48-33"></a></span>
<span id="cb48-34"><a href="#cb48-34"></a><span class="co"># Calculate all dislacement frequency and displacement CDF for all tracks longer than 3 frames</span></span>
<span id="cb48-35"><a href="#cb48-35"></a><span class="kw"><a href="../reference/displacementCDF-methods.html">displacementCDF</a></span>(trackll.combine.trim, <span class="dt">dt=</span><span class="dv">1</span>, <span class="dt">plot=</span><span class="ot">TRUE</span>, <span class="dt">output=</span><span class="ot">TRUE</span>)</span>
<span id="cb48-36"><a href="#cb48-36"></a></span>
<span id="cb48-37"><a href="#cb48-37"></a><span class="co"># Calculate all dislacement frequency and displacement CDF for all tracks longer than 3 frames</span></span>
<span id="cb48-38"><a href="#cb48-38"></a><span class="kw"><a href="../reference/displacementCDF-methods.html">displacementCDF</a></span>(trackll.combine.trim, <span class="dt">dt=</span><span class="dv">2</span>, <span class="dt">plot=</span><span class="ot">TRUE</span>, <span class="dt">output=</span><span class="ot">TRUE</span>)</span>
<span id="cb48-39"><a href="#cb48-39"></a></span>
<span id="cb48-40"><a href="#cb48-40"></a><span class="co"># End</span></span></code></pre></div>
</div>
<div id="sojournergui-a-shiny-interface" class="section level1">
<h1 class="hasAnchor">
<a href="#sojournergui-a-shiny-interface" class="anchor"></a>sojournerGUI: A Shiny Interface</h1>
<p>A Shiny app implementation of many of the core features of sojourner. Namely, the basic abilities of reading trackll video files (of all supported types), processing tracks (linking, filtering, trimming, masking, merging), and analyzing tracks (MSD, Dcoef, CDF, and dwell time). The application interface provides a code-free GUI, suited with dynamic and interactive plots, that is relatively easy to use. The app is still in alpha development and only supports the base functions needed for educational capabilities and such. A command history log, named <em>command_history.R</em> in the working directory, will be continuously updated each time a command is called for diagnostic, replication, and tracking purposes.</p>
<div id="launching" class="section level2">
<h2 class="hasAnchor">
<a href="#launching" class="anchor"></a>Launching</h2>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sojourner)</span>
<span id="cb49-2"><a href="#cb49-2"></a><span class="kw"><a href="../reference/sojourner.html">sojournerGUI</a></span>()</span></code></pre></div>
</div>
<div id="helpful-tips" class="section level2">
<h2 class="hasAnchor">
<a href="#helpful-tips" class="anchor"></a>Helpful Tips</h2>
<ul>
<li><p>If in doubt, check the console output of each command inputted through the GUI. These will show error and warning messages as needed.</p></li>
<li><p>Normal distribution, compare folder, and kernel density masking features are currently not supported.</p></li>
<li><p>Reading tracks depends on a <strong>running session of R</strong>, as it uses its native <code><a href="https://www.rdocumentation.org/packages/base/topics/file.choose">file.choose()</a></code> function.</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#input-data-preparation">Input Data Preparation</a><ul class="nav nav-pills nav-stacked">
<li><a href="#storing-track-information">Storing Track Information</a></li>
      <li><a href="#reading-in-track-data-with-createtrackll">Reading in Track Data with <code><a href="--/reference/createTrackll-methods-html">createTrackll()</a></code></a></li>
      <li><a href="#plotting-tracks">Plotting Tracks</a></li>
      <li><a href="#distribution-of-trajectory-lengths-with-dwelltime">Distribution of Trajectory Lengths with <code><a href="--/reference/dwellTime-methods-html">dwellTime()</a></code></a></li>
      <li><a href="#filter-tracks-on-length-with-filtertrack">Filter Tracks on Length with <code><a href="--/reference/filterTrack-methods-html">filterTrack()</a></code></a></li>
      </ul>
</li>
      <li>
<a href="#data-manipulation">Data Manipulation</a><ul class="nav nav-pills nav-stacked">
<li><a href="#reading-data">Reading Data</a></li>
      <li><a href="#processing-data">Processing Data</a></li>
      <li><a href="#exporting-data">Exporting Data</a></li>
      </ul>
</li>
      <li><a href="#calculating-diffusion-coefficient-using-msd-based-method">Calculating Diffusion Coefficient Using MSD-Based Method</a></li>
      <li>
<a href="#sojournergui-a-shiny-interface">sojournerGUI: A Shiny Interface</a><ul class="nav nav-pills nav-stacked">
<li><a href="#launching">Launching</a></li>
      <li><a href="#helpful-tips">Helpful Tips</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sheng Liu, Sun Jay Yoo, Xiao Na Tang, Young Soo Sung, Carl Wu, Sojourner Developer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
