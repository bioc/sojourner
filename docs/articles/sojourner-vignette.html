<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sojourner: an R package for statistical analysis of single molecule trajectories • sojourner</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Sojourner: an R package for statistical analysis of single molecule trajectories">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sojourner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sojourner-vignette.html">Sojourner: an R package for statistical analysis of single molecule trajectories</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sheng-liu/sojourner">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Sojourner: an R package for statistical analysis of single molecule trajectories</h1>
                        <h4 class="author">Sheng Liu</h4>
            <address class="author_afil">
      Department of Biology, Krieger School of Arts and Sciences, Johns Hopkins University<br><h4 class="author">Sun Jay Yoo</h4>
            <address class="author_afil">
      Department of Biomedical Engineering, Johns Hopkins University<br><h4 class="author">Xiaona Tang</h4>
            <address class="author_afil">
      Department of Biology, Krieger School of Arts and Sciences, Johns Hopkins University<br><h4 class="author">Young Soo Sung</h4>
            <address class="author_afil">
      Department of Computer Science, Johns Hopkins University<br><h4 class="author">Carl Wu</h4>
            <address class="author_afil">
      Department of Molecular Biology and Genetics, School of Medicine, Johns Hopkins University<br><h4 class="date">2020-05-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sheng-liu/sojourner/blob/master/vignettes/sojourner-vignette.Rmd"><code>vignettes/sojourner-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>sojourner-vignette.Rmd</code></div>

    </address>
</address>
</address>
</address>
</address>
</div>

    
    
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  document.querySelector("h1").className = "title";
});
</script><script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  var links = document.links;  
  for (var i = 0, linksLength = links.length; i < linksLength; i++)
    if (links[i].hostname != window.location.hostname)
      links[i].target = '_blank';
});
</script><p><img src="../../../../../../SDXC%20Disc/Google%20Drive/SingleMoleculeTracking/sojourner-master/sojourner/vignettes/sojourner_logo.png" style="width:30.0%"></p>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>A basic task in 2D single molecule tracking is to determine diffusion coefficient from molecule trajectories identified after initial image data acquisition. The trajectory (term used interchangeably with “tracks”) of a molecule is presented as a table of <span class="math inline">\(x\)</span>,<span class="math inline">\(y\)</span>-coordinates in the unit of pixel, which then can be converted to other measurement, such as <span class="math inline">\(\mu\)</span>m, according to the resolution of the camera. The <em>sojourner</em> package provides methods to import/export, process, and analyze such data. Analysis techniques include the diffusion coefficient using the mean square displacement (MSD), displacement cumulative distribution function (CDF), as well as hidden Markov model (HMM) methods (in next release) from such input data. This vignette covers basic usage of the package.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Using BiocManager:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ns-load">requireNamespace</a></span>(<span class="st">"BiocManager"</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">    <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"BiocManager"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">BiocManager<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/BiocManager/topics/install">install</a></span>(<span class="st">"sojourner"</span>)</a></code></pre></div>
<p>Or, using the release version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"sheng-liu/sojourner"</span>, <span class="dt">build_vignettes =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>To load the package:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sojourner)</a></code></pre></div>
<pre><code>## Registered S3 method overwritten by 'R.oo':
##   method        from       
##   throw.default R.methodsS3</code></pre>
</div>
</div>
<div id="basic-track-data-structure" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-track-data-structure" class="anchor"></a>Basic Track Data Structure</h1>
<p>The input file for <em>sojourner</em> is the Diatrack (.txt or .mat), ImageJ Particle Tracker (.csv), SLIMfast (.txt), or u-track (.mat) output file. Tracks are extracted from the output files and then stored in a <code>trackll</code>, a list of track lists. A track denotes a single trajectory stored in a <code>data.frame</code> recording <span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>, <span class="math inline">\(z\)</span> and (video) frame number. A <code>trackl</code> track list is a collection of track data from one video file output. Lastly, a “trackll” is a collection of “trackl” in one folder.</p>
<p>In this example, the folder “SWR1_2” contains one track list with 207 tracks and one track list with 139 tracks:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">folder=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"SWR1_2"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">trackll =<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder=</span>folder, <span class="dt">input=</span><span class="dv">3</span>)</a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(trackll,<span class="dt">max.level=</span><span class="dv">2</span>, <span class="dt">list.len=</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## List of 2
##  $ SWR1_WT_140mW_image6.csv:List of 207
##   ..$ mage6.1.4.1.1        :'data.frame':    4 obs. of  4 variables:
##   ..$ mage6.2.2.2.2        :'data.frame':    2 obs. of  4 variables:
##   .. [list output truncated]
##  $ SWR1_WT_140mW_image7.csv:List of 139
##   ..$ mage7.1.2.1.1        :'data.frame':    2 obs. of  4 variables:
##   ..$ mage7.1.9.2.2        :'data.frame':    9 obs. of  4 variables:
##   .. [list output truncated]</code></pre>
<p>Multiple folders can also be stored in a single trackll. Here, <code>trackll</code> denotes a list of folders, and each <code>trackl</code> contains all tracks from every file in the folder. This structure can be constructed as such:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">trackll=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">FOLDER=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">track=</span>track))</a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Construct trackll from data.frame</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">trackl=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">track_1=</span>dataframe_<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">            <span class="dt">track_2=</span>dataframe_<span class="dv">2</span>,</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">            <span class="dt">track_3=</span>dataframe_<span class="dv">3</span>,</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">            ...</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">            <span class="dt">track_n=</span>dataframe_n)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"></a>
<a class="sourceLine" id="cb9-8" data-line-number="8">trackll=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">FOLDER_1=</span>trackl_<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">             <span class="dt">FOLDER_2=</span>trackl_<span class="dv">2</span>,</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">             <span class="dt">FOLDER_3=</span>trackl_<span class="dv">3</span>,</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">             ...</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">             <span class="dt">FOLDER_n=</span>trackl_n,)</a></code></pre></div>
<p>Merging all tracks from every file in the folder into a single <code>trackl</code> in a <code>trackll</code> can also be done through <code><a href="../reference/mergeTracks-methods.html">mergeTracks()</a></code>. In this example, both track lists from “SWR1_2” were merged together to form a list of 346 tracks.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">folder=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"SWR1_2"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">trackll =<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder=</span>folder, <span class="dt">input=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">trackll &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mergeTracks-methods.html">mergeTracks</a></span>(<span class="dt">folder=</span>folder, <span class="dt">trackll=</span>trackll)</a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(trackll,<span class="dt">max.level=</span><span class="dv">2</span>, <span class="dt">list.len=</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## List of 1
##  $ SWR1_2:List of 346
##   ..$ mage6.1.4.1.1        :'data.frame':    4 obs. of  4 variables:
##   ..$ mage6.2.2.2.2        :'data.frame':    2 obs. of  4 variables:
##   .. [list output truncated]</code></pre>
<p>To see the coordinates of an individual track:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># Specify the folder name and the track name</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">trackll[[<span class="st">"SWR1_2"</span>]][<span class="st">"mage6.1.4.1.1"</span>]</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co"># Alternatively, specify the index of the folder and the track</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co"># trackll[[1]][1]</span></a></code></pre></div>
<pre><code>## $mage6.1.4.1.1
##       x     y z Frame
## 1 40.32 49.36 1     1
## 2 41.03 47.33 1     2
## 3 41.05 48.43 1     3
## 4 40.90 49.09 1     4</code></pre>
</div>
<div id="track-data-manipulation" class="section level1">
<h1 class="hasAnchor">
<a href="#track-data-manipulation" class="anchor"></a>Track Data Manipulation</h1>
<p><em>sojourner</em> provides tools to manage and manipulate track data. Below are a few examples of the commonly used functions to import, process, and export single molecule track data.</p>
<div id="reading-track-data" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-track-data" class="anchor"></a>Reading Track Data</h2>
<p>First, read in track data taken from Diatrack, ImageJ Particle Tracker, SLIMfast, or u-track. In this example, we read data from ImageJ .csv-formatted files from “SWR1_2”.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Designate a folder and then create trackll from ImageJ .csv data</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">folder=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"SWR1_2"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">trackll =<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder=</span>folder, <span class="dt">input=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co"># Alternatively, use interact to open file browser and select input data type</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co"># trackll = createTrackll(interact = TRUE)</span></a></code></pre></div>
<pre><code>## 
## Reading ParticleTracker file:  SWR1_WT_140mW_image6.csv ...
## 
##  mage6 read and processed.
## 
## Reading ParticleTracker file:  SWR1_WT_140mW_image7.csv ...
## 
##  mage7 read and processed.
## 
## Process complete.</code></pre>
</div>
<div id="processing-track-data" class="section level2">
<h2 class="hasAnchor">
<a href="#processing-track-data" class="anchor"></a>Processing Track Data</h2>
<div id="linking-skipped-frames" class="section level3">
<h3 class="hasAnchor">
<a href="#linking-skipped-frames" class="anchor"></a>Linking Skipped Frames</h3>
<p>Different tracking softwares (Diatrack, ImageJ Particle Tracker, SLIMfast, u-track) often use varying algorithms to stitch together single molecule localizations into trajectories. Sometimes, a molecule can disappear for several frames and can classify single trajectories as two. <code><a href="../reference/linkSkippedFrames-methods.html">linkSkippedFrames()</a></code> allows users to link trajectories that skip (or do not appear for) a number of frames. In this example, all tracks that skip a maximum of 10 frames and reappear within 5 pixels are linked:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># Basic function call of linkSkippedFrames</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">trackll.linked &lt;-<span class="st"> </span><span class="kw"><a href="../reference/linkSkippedFrames-methods.html">linkSkippedFrames</a></span>(trackll, <span class="dt">tolerance =</span> <span class="dv">5</span>, <span class="dt">maxSkip =</span> <span class="dv">10</span>)</a></code></pre></div>
<pre><code>## 
## Linking mage6 ...
## 
##  156 links found in mage6 
## 
## Linking mage7 ...
## 
##  112 links found in mage7 
## 
## Process complete.</code></pre>
</div>
<div id="filtering-tracks-by-length" class="section level3">
<h3 class="hasAnchor">
<a href="#filtering-tracks-by-length" class="anchor"></a>Filtering Tracks by Length</h3>
<p><code><a href="../reference/filterTrack-methods.html">filterTrack()</a></code> can be used to filter out track that have lengths (defined by number of frames) that fall within a specified range. In this example, only tracks that appear for at least 7 frames are kept:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">trackll.filter=<span class="kw"><a href="../reference/filterTrack-methods.html">filterTrack</a></span>(trackll ,<span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">7</span>,<span class="ot">Inf</span>))</a></code></pre></div>
<pre><code>## applying filter, min 7   max Inf</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># See the min and max length of the trackll</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="co"># trackLength() is a helper function output track length of trackll</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="../reference/filterTrack-methods.html">trackLength</a></span>(trackll),min)</a></code></pre></div>
<pre><code>## $SWR1_WT_140mW_image6.csv
## [1] 2
## 
## $SWR1_WT_140mW_image7.csv
## [1] 2</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="../reference/filterTrack-methods.html">trackLength</a></span>(trackll.filter),min)</a></code></pre></div>
<pre><code>## $SWR1_WT_140mW_image6.csv
## [1] 7
## 
## $SWR1_WT_140mW_image7.csv
## [1] 7</code></pre>
</div>
<div id="trim-tracks-to-a-length" class="section level3">
<h3 class="hasAnchor">
<a href="#trim-tracks-to-a-length" class="anchor"></a>Trim Tracks to a Length</h3>
<p><code><a href="../reference/filterTrack-methods.html">trimTrack()</a></code> is used to to trim/cutoff tracks. Given a specified range of track lengths (defined by number of frames), only tracks that fall within the range are kept, otherwise trimmed to the upper limit. In this example, all tracks with lengths greater than 20 have their lengths trimmed to 20:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">trackll.trim=<span class="kw"><a href="../reference/filterTrack-methods.html">trimTrack</a></span>(trackll,<span class="dt">trimmer=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>,<span class="dv">20</span>))</a></code></pre></div>
<pre><code>## applying trimmer, min 1   max 20</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># See the min and max length of the trackll</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="co"># trackLength() is a helper function output track length of trackll</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="../reference/filterTrack-methods.html">trackLength</a></span>(trackll),max)</a></code></pre></div>
<pre><code>## $SWR1_WT_140mW_image6.csv
## [1] 30
## 
## $SWR1_WT_140mW_image7.csv
## [1] 15</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="../reference/filterTrack-methods.html">trackLength</a></span>(trackll.trim),max)</a></code></pre></div>
<pre><code>## $SWR1_WT_140mW_image6.csv
## [1] 20
## 
## $SWR1_WT_140mW_image7.csv
## [1] 15</code></pre>
</div>
<div id="applying-image-masks" class="section level3">
<h3 class="hasAnchor">
<a href="#applying-image-masks" class="anchor"></a>Applying Image Masks</h3>
<p>In order to apply a binary image mask to track data, one can use <code><a href="../reference/maskTracks-methods.html">maskTracks()</a></code>. In this example, we use image masks for each track file generated by thresholding the initial fluorescent glow of the nucleus. See man pages for <code>indexCell()</code>, <code><a href="../reference/maskTracks-methods.html">filterOnCell()</a></code>, and <code><a href="../reference/maskTracks-methods.html">sampleTracks()</a></code> for more advanced functionality (e.g. separating tracks, filtering, and sampling by masked cells).</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="co"># Basic masking with folder path with image masks</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">folder =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"ImageJ"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">trackll =<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(folder, <span class="dt">input =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb31-4" data-line-number="4">trackll.filter=<span class="kw"><a href="../reference/filterTrack-methods.html">filterTrack</a></span>(trackll ,<span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">7</span>,<span class="ot">Inf</span>))</a>
<a class="sourceLine" id="cb31-5" data-line-number="5">trackll.masked &lt;-<span class="st"> </span><span class="kw"><a href="../reference/maskTracks-methods.html">maskTracks</a></span>(<span class="dt">folder =</span> folder, <span class="dt">trackll =</span> trackll.filter)</a></code></pre></div>
<p>To plot the masks:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="co"># Plot mask</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="kw"><a href="../reference/plotTrack-methods.html">plotMask</a></span>(folder)</a></code></pre></div>
<p>To plot the nuclear overlay of the un-masked data:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># If nuclear image is available</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw"><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay</a></span>(<span class="dt">folder=</span>folder,<span class="dt">trackll=</span>trackll)</a></code></pre></div>
<p>To plot the nuclear overlay of the masked data:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="co"># If nuclear image is available</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="kw"><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay</a></span>(<span class="dt">folder=</span>folder,<span class="dt">trackll=</span>trackll.masked)</a></code></pre></div>
</div>
</div>
<div id="exporting-track-data" class="section level2">
<h2 class="hasAnchor">
<a href="#exporting-track-data" class="anchor"></a>Exporting Track Data</h2>
<p>To export a <code>trackll</code>, use <code><a href="../reference/exportTrackll-methods.html">exportTrackll()</a></code> to save track data into a .csv file in the working directory. This function saves the data into the same format used by ImageJ Particle Tracker, fully preserving all track information, and maintaining short read/write computation time and readability in Excel/etc.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="co"># Basic function call to exportTrackll into working directory</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw"><a href="../reference/exportTrackll-methods.html">exportTrackll</a></span>(trackll)</a>
<a class="sourceLine" id="cb35-3" data-line-number="3"></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="co"># Read exported trackll saved in working directory</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5">trackll<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/getwd">getwd</a></span>(), <span class="dt">input =</span> <span class="dv">3</span>)</a></code></pre></div>
</div>
</div>
<div id="plotting-tracks" class="section level1">
<h1 class="hasAnchor">
<a href="#plotting-tracks" class="anchor"></a>Plotting Tracks</h1>
<p>The first thing one may want to do is to see how the tracks look like in 2-D space. The track name is useful in this case if one wants to see specific trajectories and its associated movies.</p>
<p>All one needs to do is to create a .csv file contains trajectory names in its first column. <em>sojourner</em> package contains such an example .csv file.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="co"># specify the path of the file containing trajectory index names, index file</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2">index.file2=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"INDEX"</span>,<span class="st">"indexFile2.csv"</span>,</a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="dt">package=</span><span class="st">"sojourner"</span>)</a>
<a class="sourceLine" id="cb36-4" data-line-number="4"><span class="co"># specify the folders containing the output files</span></a>
<a class="sourceLine" id="cb36-5" data-line-number="5">folder1=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"SWR1"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</a>
<a class="sourceLine" id="cb36-6" data-line-number="6">folder2=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"HTZ1"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</a>
<a class="sourceLine" id="cb36-7" data-line-number="7"><span class="co"># plot trajectories specified in the trajectory index file</span></a>
<a class="sourceLine" id="cb36-8" data-line-number="8"><span class="kw"><a href="../reference/plotTrack-methods.html">plotTrackFromIndex</a></span>(<span class="dt">index.file=</span>index.file2,</a>
<a class="sourceLine" id="cb36-9" data-line-number="9">                   <span class="dt">movie.folder=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(folder1,folder2),<span class="dt">input=</span><span class="dv">3</span>)</a></code></pre></div>
<p>The output plots the tracks based on its name, with the information contained in its name (i.e. start frame and length/duration), one can also pull out its movie. See <code><a href="../reference/plotTrack-methods.html">? plotTrack</a></code> for more plotting options.</p>
</div>
<div id="distribution-of-trajectory-lengths" class="section level1">
<h1 class="hasAnchor">
<a href="#distribution-of-trajectory-lengths" class="anchor"></a>Distribution of Trajectory Lengths</h1>
<p>One may be interested to see the distribution of the (time) length of the tracks. This can be done by calculating and plotting the dwell times:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw"><a href="../reference/dwellTime-methods.html">dwellTime</a></span>(trackll,<span class="dt">plot=</span><span class="ot">TRUE</span>) <span class="co"># default t.interval=10, x.scale=c(0,250)</span></a></code></pre></div>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
</div>
<div id="calculating-diffusion-coefficient-using-msd-based-method" class="section level1">
<h1 class="hasAnchor">
<a href="#calculating-diffusion-coefficient-using-msd-based-method" class="anchor"></a>Calculating Diffusion Coefficient Using MSD-Based Method</h1>
<p>Below is an example of simple analysis workflow using diffusion coefficient.</p>
<div id="data-import" class="section level2">
<h2 class="hasAnchor">
<a href="#data-import" class="anchor"></a>Data Import</h2>
<p>We will need to first create a basic data structure (trackll, i.e. list of track list) for all analysis. It contains the trajectory information of all tracks in a specified folder, using createTrackll() function.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="co"># Specify folder with data</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2">folder=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>,<span class="st">"HSF"</span>,<span class="dt">package=</span><span class="st">"sojourner"</span>)</a>
<a class="sourceLine" id="cb38-3" data-line-number="3"></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="co"># Create track list</span></a>
<a class="sourceLine" id="cb38-5" data-line-number="5">trackll&lt;-<span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(<span class="dt">folder=</span>folder, <span class="dt">interact=</span><span class="ot">FALSE</span>, <span class="dt">input=</span><span class="dv">3</span>, <span class="dt">ab.track=</span><span class="ot">FALSE</span>, <span class="dt">cores=</span><span class="dv">1</span>, <span class="dt">frameRecord=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb38-6" data-line-number="6"></a>
<a class="sourceLine" id="cb38-7" data-line-number="7"><span class="co"># Take a look at the list by </span></a>
<a class="sourceLine" id="cb38-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(trackll,<span class="dv">1</span>)</a></code></pre></div>
</div>
<div id="data-clean-up" class="section level2">
<h2 class="hasAnchor">
<a href="#data-clean-up" class="anchor"></a>Data Clean Up</h2>
<p>We then clean up the data with filters and masks. In this case, we select only the tracks with 3 frames or more, and remove tracks that is outside of the nuclei.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="co"># Filter/choose tracks 3 frames or longer for all analysis</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2">trackll.fi&lt;-<span class="kw"><a href="../reference/filterTrack-methods.html">filterTrack</a></span>(<span class="dt">trackll=</span>trackll, <span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">min=</span><span class="dv">3</span>,<span class="dt">max=</span><span class="ot">Inf</span>))</a>
<a class="sourceLine" id="cb39-3" data-line-number="3"></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="co"># Apply mask and remove tracks outside nuclei</span></a>
<a class="sourceLine" id="cb39-5" data-line-number="5">trackll.fi.ma&lt;-<span class="kw"><a href="../reference/maskTracks-methods.html">maskTracks</a></span>(folder,trackll.fi)</a></code></pre></div>
</div>
<div id="visulization-of-trajectories" class="section level2">
<h2 class="hasAnchor">
<a href="#visulization-of-trajectories" class="anchor"></a>Visulization of Trajectories</h2>
<p>To see how the tracks look like, we can plot the tracks over cell image (e.g. bright field image or nuclei overall fluorescence) to see the distribution of tracks.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="co"># Overlay all tracks on nuclei</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="kw"><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay</a></span>(<span class="dt">folder=</span>folder,<span class="dt">trackll=</span>trackll.fi,<span class="dt">cores=</span><span class="dv">1</span>, <span class="dt">max.pixel=</span><span class="dv">128</span>,<span class="dt">nrow=</span><span class="dv">2</span>,<span class="dt">ncol=</span><span class="dv">2</span>,<span class="dt">width=</span><span class="dv">16</span>,<span class="dt">height=</span><span class="dv">16</span>)</a></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="co"># Overlay tracks after nuclear mask</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="kw"><a href="../reference/plotTrack-methods.html">plotNucTrackOverlay</a></span>(<span class="dt">folder=</span>folder,<span class="dt">trackll=</span>trackll.fi.ma,<span class="dt">cores=</span><span class="dv">1</span>, <span class="dt">max.pixel=</span><span class="dv">128</span>,<span class="dt">nrow=</span><span class="dv">2</span>,<span class="dt">ncol=</span><span class="dv">2</span>,<span class="dt">width=</span><span class="dv">16</span>,<span class="dt">height=</span><span class="dv">16</span>)</a></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="co"># Overlay tracks color coded for diffusion coefficient</span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="kw"><a href="../reference/plotTrackOverlay_Dcoef-methods.html">plotTrackOverlay_Dcoef</a></span>(<span class="dt">trackll=</span>trackll.fi.ma, <span class="dt">Dcoef.range=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="op">-</span><span class="dv">2</span>,<span class="dv">1</span>), <span class="dt">rsquare=</span><span class="fl">0.8</span>, <span class="dt">t.interval=</span><span class="fl">0.01</span>, <span class="dt">dt=</span><span class="dv">6</span>, <span class="dt">resolution=</span><span class="fl">0.107</span>)</a></code></pre></div>
<p>We used Dcoef.range to select tracks whose Dcoef is within the range. Other tracks will not be plotted.</p>
</div>
<div id="analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#analysis" class="anchor"></a>Analysis</h2>
<p>We then move on to the analysis of the biophysical properties of a molecule, e.g. mean square displacement (MSD), diffusion coefficient (Dcoef), residence time (RT) etc.</p>
<p>For an overall view of one factor, we may want to merge all tracks in a folder.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="co"># Merge tracks from different image files in the folder</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2">trackll.fi.ma.me=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="../reference/mergeTracks-methods.html">mergeTracks</a></span>(folder, trackll.fi.ma))</a></code></pre></div>
<p>And sometimes, we may have data of same type in multiple folders and want to combine them together.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">folder2=<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">'extdata'</span>,<span class="st">'HSF_2'</span>,<span class="dt">package=</span><span class="st">'sojourner'</span>)</a>
<a class="sourceLine" id="cb44-2" data-line-number="2">trackll2=<span class="kw"><a href="../reference/createTrackll-methods.html">createTrackll</a></span>(folder2,<span class="dt">input=</span><span class="dv">2</span>, <span class="dt">cores =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb44-3" data-line-number="3">trackll2=<span class="kw"><a href="../reference/maskTracks-methods.html">maskTracks</a></span>(folder2,trackll2)</a>
<a class="sourceLine" id="cb44-4" data-line-number="4">trackll2=<span class="kw"><a href="../reference/mergeTracks-methods.html">mergeTracks</a></span>(folder2,trackll2)</a>
<a class="sourceLine" id="cb44-5" data-line-number="5"></a>
<a class="sourceLine" id="cb44-6" data-line-number="6"><span class="co"># Combine the tracklls together</span></a>
<a class="sourceLine" id="cb44-7" data-line-number="7">Trackll.combine=<span class="kw"><a href="../reference/combineTrackll-methods.html">combineTrackll</a></span>(<span class="dt">trackll=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(trackll,trackll2),<span class="dt">merged=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p>Now we can calculate msd, Dcoef, and residence time of a molecule.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="co"># calculate MSD for all tracks longer than 3 frames</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="kw"><a href="../reference/msd-methods.html">msd</a></span>(Trackll.combine,<span class="dt">dt=</span><span class="dv">20</span>,<span class="dt">resolution=</span><span class="fl">0.107</span>,<span class="dt">summarize=</span><span class="ot">TRUE</span>,<span class="dt">cores=</span><span class="dv">1</span>,<span class="dt">plot=</span><span class="ot">TRUE</span>,<span class="dt">output=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-28-1.png" width="700"></p>
<p>For some analysis, we may just want to a portion of the trajectory, this can be done by using trimTrack() function.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">trackll.combine.trim=<span class="kw"><a href="../reference/filterTrack-methods.html">trimTrack</a></span>(Trackll.combine,<span class="dt">trimmer=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>,<span class="dv">11</span>))</a>
<a class="sourceLine" id="cb46-2" data-line-number="2"></a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="kw"><a href="../reference/msd-methods.html">msd</a></span>(trackll.combine.trim,<span class="dt">dt=</span><span class="dv">10</span>,<span class="dt">resolution=</span><span class="fl">0.107</span>,<span class="dt">summarize=</span><span class="ot">TRUE</span>,<span class="dt">cores=</span><span class="dv">1</span>,<span class="dt">plot=</span><span class="ot">TRUE</span>,<span class="dt">output=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="kw"><a href="../reference/Dcoef-methods.html">Dcoef</a></span>(<span class="dt">trackll=</span>trackll.combine.trim,<span class="dt">dt=</span><span class="dv">5</span>, <span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">min=</span><span class="dv">6</span>,<span class="dt">max=</span><span class="ot">Inf</span>), <span class="dt">method=</span><span class="st">"static"</span>, <span class="dt">plot=</span><span class="ot">TRUE</span>, <span class="dt">output=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-30-1.png" width="700"><img src="sojourner-vignette_files/figure-html/unnamed-chunk-30-2.png" width="700"></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="co">## calculating displacement CDF</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2"></a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="co"># Calculate all dislacement frequency and displacement CDF for all tracks longer than 3 frames</span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="kw"><a href="../reference/displacementCDF-methods.html">displacementCDF</a></span>(trackll.combine.trim, <span class="dt">dt=</span><span class="dv">1</span>, <span class="dt">plot=</span><span class="ot">TRUE</span>, <span class="dt">output=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="co">## Analysis for Residence time. </span></a>
<a class="sourceLine" id="cb49-2" data-line-number="2"></a>
<a class="sourceLine" id="cb49-3" data-line-number="3"><span class="co"># Calculate 1-CDF (survival probability) of the dwell time/residence time of all tracks (not trimmed) longer than 3 frames</span></a>
<a class="sourceLine" id="cb49-4" data-line-number="4"><span class="kw"><a href="../reference/compare_RT_CDF-methods.html">compare_RT_CDF</a></span>(<span class="dt">trackll=</span> Trackll.combine, <span class="dt">x.max=</span><span class="dv">100</span>, <span class="dt">filter=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">min=</span><span class="dv">3</span>,<span class="dt">max=</span><span class="ot">Inf</span>), <span class="dt">t.interval=</span><span class="fl">0.5</span>, <span class="dt">output=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="co"># Calculate residence time of tracks by 2-component exponential decay fitting of the 1-CDF curve</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="kw"><a href="../reference/fitRT-methods.html">fitRT</a></span>(<span class="dt">trackll=</span> trackll.fi.ma.me, <span class="dt">x.max=</span><span class="dv">100</span>, <span class="dt">N.min=</span><span class="fl">1.5</span>, <span class="dt">t.interval=</span><span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="sojourner-vignette_files/figure-html/unnamed-chunk-33-1.png" width="700"></p>
<p>This is just a brief example of analysis one can do using the statistic tools provided in sojourner package. Further information regarding function usage or analysis techniques can be found in function help docs and on <a href="https://sheng-liu.github.io/sojourner/" class="uri">https://sheng-liu.github.io/sojourner/</a> website.</p>
</div>
</div>
<div id="sojournergui-a-shiny-interface" class="section level1">
<h1 class="hasAnchor">
<a href="#sojournergui-a-shiny-interface" class="anchor"></a>sojournerGUI: A Shiny Interface</h1>
<p>A Shiny app implementation of many of the core features of sojourner. Namely, the basic abilities of reading trackll video files (of all supported types), processing tracks (linking, filtering, trimming, masking, merging), and analyzing tracks (MSD, Dcoef, CDF, and dwell time). The application interface provides a code-free GUI, suited with dynamic and interactive plots, that is relatively easy to use. The app is still in alpha development and only supports the base functions needed for educational capabilities and such. A command history log, named <em>command_history.R</em> in the working directory, will be continuously updated each time a command is called for diagnostic, replication, and tracking purposes.</p>
<div id="launching" class="section level2">
<h2 class="hasAnchor">
<a href="#launching" class="anchor"></a>Launching</h2>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw"><a href="../reference/sojournerGUI-methods.html">sojournerGUI</a></span>()</a></code></pre></div>
</div>
<div id="helpful-tips" class="section level2">
<h2 class="hasAnchor">
<a href="#helpful-tips" class="anchor"></a>Helpful Tips</h2>
<ul>
<li><p>If in doubt, check the console output of each command inputted through the GUI. These will show error and warning messages as needed.</p></li>
<li><p>Normal distribution, compare folder, and kernel density masking features are currently not supported.</p></li>
<li><p>Reading tracks depends on a <strong>running session of R</strong>, as it uses its native <code><a href="https://www.rdocumentation.org/packages/base/topics/file.choose">file.choose()</a></code> function.</p></li>
</ul>
</div>
</div>
<div id="sessioninfo" class="section level1">
<h1 class="hasAnchor">
<a href="#sessioninfo" class="anchor"></a>SessionInfo</h1>
<p>Here is the sessionInfo() on which this document was compiled:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/sessionInfo">sessionInfo</a></span>()</a></code></pre></div>
<pre><code>## R version 3.6.0 (2019-04-26)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS High Sierra 10.13.6
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] sojourner_1.1.4  BiocStyle_2.13.2
## 
## loaded via a namespace (and not attached):
##  [1] segmented_1.0-0     pixmap_0.4-11       bitops_1.0-6       
##  [4] fs_1.3.1            EBImage_4.27.0      RColorBrewer_1.1-2 
##  [7] rprojroot_1.3-2     tools_3.6.0         backports_1.1.4    
## [10] R6_2.4.0            lazyeval_0.2.2      BiocGenerics_0.31.5
## [13] colorspace_1.4-1    raster_2.9-23       npsurv_0.4-0       
## [16] sp_1.3-1            tidyselect_0.2.5    gridExtra_2.3      
## [19] compiler_3.6.0      xml2_1.2.2          shinyjs_1.0        
## [22] desc_1.2.0          labeling_0.3        bookdown_0.12      
## [25] scales_1.0.0        hexbin_1.27.3       pkgdown_1.3.0      
## [28] stringr_1.4.0       digest_0.6.20       tiff_0.1-5         
## [31] fftwtools_0.9-8     mixtools_1.1.0      rmarkdown_1.14     
## [34] R.utils_2.9.0       jpeg_0.1-8          pkgconfig_2.0.2    
## [37] htmltools_0.3.6     htmlwidgets_1.3     rlang_0.4.0        
## [40] rstudioapi_0.10     shiny_1.3.2         zoo_1.8-6          
## [43] mclust_5.4.5        dplyr_0.8.3         R.oo_1.22.0        
## [46] RCurl_1.95-4.12     magrittr_1.5        nls2_0.2           
## [49] R.matlab_3.6.2      Matrix_1.2-17       Rcpp_1.0.2         
## [52] munsell_0.5.0       abind_1.4-5         R.methodsS3_1.7.1  
## [55] stringi_1.4.3       yaml_2.2.0          MASS_7.3-51.4      
## [58] plyr_1.8.4          grid_3.6.0          parallel_3.6.0     
## [61] promises_1.0.1      crayon_1.3.4        rasterVis_0.46     
## [64] lattice_0.20-38     splines_3.6.0       locfit_1.5-9.1     
## [67] knitr_1.24          pillar_1.4.2        boot_1.3-23        
## [70] reshape2_1.4.3      codetools_0.2-16    glue_1.3.1         
## [73] evaluate_0.14       lsei_1.2-0          latticeExtra_0.6-28
## [76] data.table_1.12.2   BiocManager_1.30.4  png_0.1-7          
## [79] httpuv_1.5.1        gtable_0.3.0        purrr_0.3.4        
## [82] assertthat_0.2.1    sampSurf_0.7-4      ggplot2_3.2.1      
## [85] xfun_0.8            mime_0.7            xtable_1.8-4       
## [88] roxygen2_7.1.0      later_0.8.0         survival_2.44-1.1  
## [91] viridisLite_0.3.0   minpack.lm_1.2-1    truncnorm_1.0-8    
## [94] tibble_2.1.3        mltools_0.3.5       memoise_1.1.0      
## [97] fitdistrplus_1.0-14 rtiff_1.4.6</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#introduction">Introduction</a><ul class="nav nav-pills nav-stacked">
<li><a href="#installation">Installation</a></li>
      </ul>
</li>
      <li><a href="#basic-track-data-structure">Basic Track Data Structure</a></li>
      <li>
<a href="#track-data-manipulation">Track Data Manipulation</a><ul class="nav nav-pills nav-stacked">
<li><a href="#reading-track-data">Reading Track Data</a></li>
      <li><a href="#processing-track-data">Processing Track Data</a></li>
      <li><a href="#exporting-track-data">Exporting Track Data</a></li>
      </ul>
</li>
      <li><a href="#plotting-tracks">Plotting Tracks</a></li>
      <li><a href="#distribution-of-trajectory-lengths">Distribution of Trajectory Lengths</a></li>
      <li>
<a href="#calculating-diffusion-coefficient-using-msd-based-method">Calculating Diffusion Coefficient Using MSD-Based Method</a><ul class="nav nav-pills nav-stacked">
<li><a href="#data-import">Data Import</a></li>
      <li><a href="#data-clean-up">Data Clean Up</a></li>
      <li><a href="#visulization-of-trajectories">Visulization of Trajectories</a></li>
      <li><a href="#analysis">Analysis</a></li>
      </ul>
</li>
      <li>
<a href="#sojournergui-a-shiny-interface">sojournerGUI: A Shiny Interface</a><ul class="nav nav-pills nav-stacked">
<li><a href="#launching">Launching</a></li>
      <li><a href="#helpful-tips">Helpful Tips</a></li>
      </ul>
</li>
      <li><a href="#sessioninfo">SessionInfo</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sheng Liu, Sun Jay Yoo, Xiao Na Tang, Young Soo Sung, Carl Wu, Sojourner Developer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
