<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>maskTracks — maskTracks • sojourner</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="maskTracks — maskTracks" />

<meta property="og:description" content="apply binary image masks to lists of track lists" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sojourner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/sojourner-vignette.html">Sojourner: an R package for statistical analysis of single molecule trajectories</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sheng-liu/sojourner">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>maskTracks</h1>
    <small class="dont-index">Source: <a href='https://github.com/sheng-liu/sojourner/blob/master/R/maskTracks.R'><code>R/maskTracks.R</code></a></small>
    <div class="hidden name"><code>maskTracks-methods.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>apply binary image masks to lists of track lists</p>
    
    </div>

    <pre class="usage"><span class='fu'>maskTracks</span>(<span class='no'>folder</span>, <span class='no'>trackll</span>)

<span class='fu'>indexCell</span>(<span class='no'>folder</span>, <span class='no'>trackll</span>, <span class='kw'>areaFilter</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>Inf</span>),
    <span class='kw'>intensityFilter</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>Inf</span>), <span class='kw'>export</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>max.pixel</span> <span class='kw'>=</span> <span class='fl'>128</span>)

<span class='fu'>filterOnCell</span>(<span class='no'>trackll</span>, <span class='kw'>numTracks</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>sampleTracks</span>(<span class='no'>trackll</span>, <span class='kw'>num</span> <span class='kw'>=</span> <span class='fl'>0</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>folder</th>
      <td><p>Full path to the output files.</p></td>
    </tr>
    <tr>
      <th>trackll</th>
      <td><p>A list of track lists.</p></td>
    </tr>
    <tr>
      <th>export</th>
      <td><p>Logical indicate if .csv output file should be generated</p></td>
    </tr>
    <tr>
      <th>max.pixel</th>
      <td><p>Pixel dimension of image</p></td>
    </tr>
    <tr>
      <th>areaFilter</th>
      <td><p>Range of cell areas (pixel sq) to keep in filtering</p></td>
    </tr>
    <tr>
      <th>intensityFilter</th>
      <td><p>Range of avg cell intensities (grayscale) to keep 
in filtering</p></td>
    </tr>
    <tr>
      <th>numTracks</th>
      <td><p>Minimum number of required tracks in the trackll</p></td>
    </tr>
    <tr>
      <th>num</th>
      <td><p>Number of tracks to randomly sample per trackl in trackll</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>masked tracks in trackll format</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>IMPORTANT: It will take an extremely long time to mask large datasets. 
Filter/trim first using filterTrack() and trimTrack(), then mask using 
maskTracks(folder, trackll)! 
Note the mask file should have the same name as the output files with a 
'_MASK.tif' ending. 
If there are more mask files than trackll, masking will fail. If there are 
less mask files, trackls without masks will be deleted. Users can use 
plotMask() and plotTrackOverlay() to see the mask and its effect on 
screening tracks.</p>
<p>indexCell() will mask a trackll, separate each cell into a trackl, display 
all cell areas and mean intensities, and then apply any area and intensity 
filters.
There is also the capability to export the final areas/intensities as 
'indexCell.csv' to the home directory and the pixel dimensions can be 
changed.</p>
<p>filterOnCell() eliminates all trackl in trackll that has less than 
numTracks tracks.</p>
<p>sampleTracks() randomly samples num number of tracks for each trackl in 
trackll.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#Basic masking with folder path with image masks</span>
<span class='no'>folder</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/system.file'>system.file</a></span>(<span class='st'>'extdata'</span>,<span class='st'>'ImageJ'</span>,<span class='kw'>package</span><span class='kw'>=</span><span class='st'>'sojourner'</span>)
<span class='no'>trackll</span> <span class='kw'>=</span> <span class='fu'><a href='createTrackll-methods.html'>createTrackll</a></span>(<span class='kw'>folder</span><span class='kw'>=</span><span class='no'>folder</span>, <span class='kw'>input</span><span class='kw'>=</span><span class='fl'>3</span>)</div><div class='output co'>#&gt; 
#&gt; Reading ParticleTracker file:  epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv ...
#&gt; 
#&gt;  0mW_1 read and processed.
#&gt; 
#&gt; Reading ParticleTracker file:  epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv ...
#&gt; 
#&gt;  0mW_2 read and processed.
#&gt; 
#&gt; Process complete.</div><div class='input'><span class='no'>trackll.masked</span> <span class='kw'>&lt;-</span> <span class='fu'>maskTracks</span>(<span class='kw'>folder</span> <span class='kw'>=</span> <span class='no'>folder</span>, <span class='kw'>trackll</span> <span class='kw'>=</span> <span class='no'>trackll</span>)</div><div class='output co'>#&gt; Reading mask file     epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1_MASK.tif 
#&gt; Reading mask file     epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2_MASK.tif 
#&gt; 
#&gt; All files masked.</div><div class='input'>
<span class='co'>#Compare the masking effect</span>
<span class='fu'><a href='plotTrack-methods.html'>plotTrackOverlay</a></span>(<span class='no'>trackll</span>)</div><div class='output co'>#&gt; 
#&gt; Processing epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv
#&gt; Processing epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv
#&gt; Output combined plot...</div><div class='output co'>#&gt; 
#&gt; Done!</div><div class='input'><span class='fu'><a href='plotTrack-methods.html'>plotTrackOverlay</a></span>(<span class='no'>trackll.masked</span>)</div><div class='output co'>#&gt; 
#&gt; Processing epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv
#&gt; Processing epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv
#&gt; Output combined plot...</div><div class='output co'>#&gt; 
#&gt; Done!</div><div class='input'>
<span class='co'>#Plot mask</span>
<span class='no'>mask.list</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list.files'>list.files</a></span>(<span class='kw'>path</span><span class='kw'>=</span><span class='no'>folder</span>,<span class='kw'>pattern</span><span class='kw'>=</span><span class='st'>'_MASK.tif'</span>,<span class='kw'>full.names</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='fu'><a href='plotTrack-methods.html'>plotMask</a></span>(<span class='no'>folder</span>)</div><div class='output co'>#&gt; 
#&gt; Reading mask file epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1_MASK.tif</div><div class='img'><img src='maskTracks-methods-1.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; Reading mask file epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2_MASK.tif</div><div class='img'><img src='maskTracks-methods-2.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; Done!</div><div class='input'>
<span class='co'>#If Nuclear image is available</span>
<span class='fu'><a href='plotTrack-methods.html'>plotNucTrackOverlay</a></span>(<span class='kw'>folder</span><span class='kw'>=</span><span class='no'>folder</span>,<span class='kw'>trackll</span><span class='kw'>=</span><span class='no'>trackll</span>)</div><div class='output co'>#&gt; 
#&gt; Processing epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv</div><div class='img'><img src='maskTracks-methods-3.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; Processing epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv</div><div class='output co'>#&gt; 
#&gt; Output combined plot...</div><div class='img'><img src='maskTracks-methods-4.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; Done!</div><div class='input'><span class='fu'><a href='plotTrack-methods.html'>plotNucTrackOverlay</a></span>(<span class='kw'>folder</span><span class='kw'>=</span><span class='no'>folder</span>,<span class='kw'>trackll</span><span class='kw'>=</span><span class='no'>trackll.masked</span>)</div><div class='output co'>#&gt; 
#&gt; Processing epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv</div><div class='img'><img src='maskTracks-methods-5.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; Processing epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv</div><div class='output co'>#&gt; 
#&gt; Output combined plot...</div><div class='img'><img src='maskTracks-methods-6.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; Done!</div><div class='input'>
<span class='co'>#Plot mask</span>
<span class='fu'><a href='plotTrack-methods.html'>plotMask</a></span>(<span class='kw'>folder</span><span class='kw'>=</span><span class='no'>folder</span>)</div><div class='output co'>#&gt; 
#&gt; Reading mask file epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1_MASK.tif</div><div class='img'><img src='maskTracks-methods-7.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; Reading mask file epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2_MASK.tif</div><div class='img'><img src='maskTracks-methods-8.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; Done!</div><div class='input'>
<span class='co'># To mask a trackll, separate each cell into a trackl, and apply any </span>
<span class='co'># intensity and area filters</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>trackll</span>, <span class='kw'>max.level</span><span class='kw'>=</span><span class='fl'>1</span>)</div><div class='output co'>#&gt; List of 2
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv:List of 800
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv:List of 544</div><div class='input'><span class='no'>trackll_indexed</span> <span class='kw'>=</span> <span class='fu'>indexCell</span>(<span class='kw'>folder</span> <span class='kw'>=</span> <span class='no'>folder</span>, <span class='kw'>trackll</span> <span class='kw'>=</span> <span class='no'>trackll</span>)</div><div class='output co'>#&gt; epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1
#&gt; Cell Areas (pixels squared): 
#&gt; 94
#&gt; 166
#&gt; 169
#&gt; 137
#&gt; 153
#&gt; Cell Intensities (grayscale): 
#&gt; 0.633249895702962 
#&gt; 0.734136546184739 
#&gt; 0.672467803689523 
#&gt; 0.572921139258623 
#&gt; 0.537459951300782 
#&gt; 
#&gt; epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2
#&gt; Cell Areas (pixels squared): 
#&gt; 157
#&gt; 70
#&gt; 88
#&gt; 154
#&gt; Cell Intensities (grayscale): 
#&gt; 0.667041338828525 
#&gt; 0.583977591036415 
#&gt; 0.709447415329768 
#&gt; 0.652711993888464 
#&gt; 
#&gt; 
#&gt; Only cell with areas between 0 and Inf pixels sq kept.
#&gt; Only cell with avg intensities between 0 and Inf grayscale kept.
#&gt; 
#&gt; All files masked, separated by cell indexes, and filters applied.</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>trackll_indexed</span>, <span class='kw'>max.level</span><span class='kw'>=</span><span class='fl'>1</span>)</div><div class='output co'>#&gt; List of 9
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_1:List of 29
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_2:List of 111
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_3:List of 84
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_4:List of 35
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_5:List of 34
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_1:List of 67
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_2:List of 10
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_3:List of 2
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_4:List of 41</div><div class='input'>
<span class='co'># To eliminate all trackl in trackll that has less than numTracks = 5 tracks</span>
<span class='co'># In this example, we eliminate all cells less with less than 5 tracks</span>
<span class='no'>trackll_filterOnCell</span> <span class='kw'>=</span> <span class='fu'>filterOnCell</span>(<span class='kw'>trackll</span><span class='kw'>=</span><span class='no'>trackll_indexed</span>,
    <span class='kw'>numTracks</span> <span class='kw'>=</span> <span class='fl'>5</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>trackll_filterOnCell</span>, <span class='kw'>max.level</span><span class='kw'>=</span><span class='fl'>1</span>)</div><div class='output co'>#&gt; List of 8
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_1:List of 29
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_2:List of 111
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_3:List of 84
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_4:List of 35
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_5:List of 34
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_1:List of 67
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_2:List of 10
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_4:List of 41</div><div class='input'>
<span class='co'># To randomly sample num = 5 tracks fo each trackl in trackll</span>
<span class='co'># In this example, we randomly sample 5 tracks for each cell</span>
<span class='no'>trackll_sampled</span> <span class='kw'>=</span> <span class='fu'>sampleTracks</span>(<span class='kw'>trackll</span><span class='kw'>=</span><span class='no'>trackll_filterOnCell</span>, <span class='kw'>num</span><span class='kw'>=</span><span class='fl'>5</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>trackll_sampled</span>, <span class='kw'>max.level</span><span class='kw'>=</span><span class='fl'>1</span>)</div><div class='output co'>#&gt; List of 8
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_1:List of 5
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_2:List of 5
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_3:List of 5
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_4:List of 5
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_1.tif.csv_5:List of 5
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_1:List of 5
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_2:List of 5
#&gt;  $ epl11AA_HTZ1Halo_No_RAP_fr10ms_120mW_2.tif.csv_4:List of 5</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sheng Liu, Sun Jay Yoo, Xiao Na Tang, Young Soo Sung, Carl Wu, Sojourner Developer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

